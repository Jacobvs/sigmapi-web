# Sigma Pi, Gamma Iota Chapter Website: Installation & Setup

[_(Back to developer guide)_](https://github.com/sigmapi-gammaiota/sigmapi-web/tree/master/docs/dev-guide/index.md)

## Dependencies

* [Git](https://git-scm.com/downloads): Version control system.
  The latest version is recommended.
* [Python 3.6.*](https://www.python.org/downloads/): The primary language
  used in the development of the website.
  * [Library: venv](https://docs.python.org/3.6/library/venv.html): Used to 
    create a virtual environment to isolate the development python from the
    system-wide python.


## First Time Setup

These steps will walk you through deploying the site on your local machine for the first time.

### 1. Clone the repository.

```bash
$ git clone https://github.com/sigmapi-gammaiota/sigmapi-web.git
...
$ cd sigmapi-web
```

### 2. Create and activate the Python virtual environment.

This creates a local python virtualenv and activates it.

```bash
$ python3 -m venv ./venv
$ source venv/bin/activate
```

### 3. Set up the development environment

You will only have to do this once. This installs requirements, loads initial
data for the database, and collects static files.

```bash
$ make dev
```

### 5. Run Django.

```bash
$ make run
```

### 6. Open a web browser on your computer, and navigate to localhost:8000 to view the site.

You can make changes to the code and your running instance will be updated automatically. You can log into the site with the admin account credentials you created earlier.  **NOTE:** Though changes will automatically update, JS and CSS resources will get cached and require a redownload using `ctrl-F5`

When you're done, you can kill the server with `ctrl-c`. Then, deactivate the python virtualenv with: 

```bash
$ deactivate
```

## Fixture Data

When you load the dev fixture data, the following users are created (along with their associated groups):

```
admin:password # The admin user.
brother:brother # A regular active brother account.
first:first # The first counselor.
second:second # The second counselor.
third:third # The third counselor.
fourth:fourth # The fourth counselor.
alumnichair:alumnichair # The alumni relations chair.
newmember:newmember # A new member.
bacchair:bacchair # The BAC chair.
housemanager:housemanager # The house manager.
parliamentarian:parliamentarian # The parliamentarian.
philanthropychair:philanthropychair # The philanthropy chair.
rushchair:rushchair # The rush chair.
sage:sage # The sage.
scholarshipchair:scholarshipchair # The scholarship chair.
socialchair:socialchair # The social chair
steward:steward # The steward.
```

### Updating Fixture Data

```bash
$ make dumpdata
```

This runs the following command:
```bash
python3 manage.py dumpdata --natural-foreign -e contenttypes -e auth.Permission > fixtures/dev_data.json
```
> --natural-foreign will use a more durable representation of foreign keys (ex. User.username instead of User.id)

> -e flags are used to exclude contenttypes and permissions, which are already generated by syncdb
