{% extends 'calendar/_base.html' %}
{% block title %}Sigma Pi Secure - Calendar Subscriptions {% endblock %}

{% block content %}
<h3>Available Calendars</h3>

{% if calendars %}
<div class="table-responsive">
	<table class="table">
		<thead>
			<tr>
				<th class="one wide">Name</th>
				<th class="seven wide">Description</th>
				<th class="two wide">Can Send?</th>
				<th class="one wide">Subcribe?</th>
			</tr>
		</thead>
		<tbody>
		{% for cal in calendars %}
			<tr>
				<td>{{ cal.name }}</td>
				<td>{{ cal.description }}</td>
				<td>
					{% if cal.can_send %}
					Yes
					{% else %}
					No
					{% endif %}
				<td>
					<form method="POST" action="{% url 'calendar-set_subscribed' cal.name %}">
						{% csrf_token %}
						<input  type="checkbox"
								name="subscribe"
								onchange="$(this).closest('form').submit()"
						{% if cal.subscribed %}
						checked
						{% else %}
						{% endif %}
						>
						</input>
					</form>
				</td>
			</tr>
		{% endfor %}
		</tbody>
	</table>
</div>

{% else %}
<p>
	You do not have access to any calendars.
</p>

{% endif %}

{% endblock %}
